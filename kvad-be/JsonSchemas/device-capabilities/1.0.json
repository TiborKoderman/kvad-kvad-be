{
    "$schema": "./1.0.json",
    "$id": "https://kvad.be/schemas/device-capabilities/1.0.json",
    "title": "Device Capabilities",
    "description": "Schema for describing the capabilities of a device.",
    "type": "object",
    "required": [],
    "properties": {
        "device": {
            "$ref": "#/$defs/device",
            "description": "Basic information about the device."
        },
        "tags": {
            "type": "array",
            "items": { "$ref": "#/$defs/tag" },
            "description": "List of tags supported by the device."
        }
    },

    "$defs": {
        "device": {
            "type": "object",
            "required": ["id", "name"],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier for the device."
                },
                "name": {
                    "type": "string",
                    "description": "Human-readable name of the device."
                },
                "description": {
                    "type": ["string", "null"],
                    "description": "Optional description of the device."
                },
                "manufacturer": {
                    "type": ["string", "null"],
                    "description": "Manufacturer of the device."
                },
                "model": {
                    "type": ["string", "null"],
                    "description": "Model of the device."
                },
                "firmwareVersion": {
                    "type": ["string", "null"],
                    "description": "Firmware version of the device."
                }
            }
        },
        "tag": {
            "type": "object",
            "required": ["path", "valueKind"],
            "properties": {
                "path": {
                    "type": "string",
                    "description": "The unique path of the tag within the device."
                },
                "valueKind": {
                    "type": "string",
                    "enum": [
                        "F64",
                        "I64",
                        "Enum",
                        "Boolean",
                        "String",
                        "Json",
                        "Decimal",
                        "Binary"
                    ],
                    "description": "The kind of value the tag represents (e.g., 'int', 'float', 'string')."
                },
                "unit": {
                    "type": ["string", "null"],
                    "description": "The unit of measurement for the tag, if applicable."
                },
                "io": {
                    "type": "string",
                    "enum": ["None", "Output", "Input", "Both"],
                    "default": "Output",
                    "description": "Indicates whether the tag is an input or output."
                },
                "history": {
                    "$ref": "#/$defs/tagHistory",
                    "description": "Optional history settings for the tag."
                }
            }
        },
        "WiFiSettings": {
            "type": "object",
            "required": ["ssid"],
            "properties": {
                "ssid": {
                    "type": "string",
                    "description": "The SSID of the WiFi network."
                },
                "password": {
                    "type": ["string", "null"],
                    "description": "The password for the WiFi network, if required."
                },
                "mode": {
                    "type": "string",
                    "enum": ["Client", "AP", "Both"],
                    "default": "Client",
                    "description": "The WiFi mode of the device."
                }
            }
        },
        "HostnameSettings": {
            "type": "object",
            "properties": {
                "hostname": {
                    "type": "string",
                    "description": "The hostname of the device."
                }
            }
        },
        "NetworkSettings": {
            "type": "object",
            "properties": {
                "dhcp": {
                    "type": "boolean",
                    "default": true,
                    "description": "Indicates whether DHCP is enabled."
                },
                "ipAddress": {
                    "type": ["string", "null"],
                    "description": "Static IP address of the device, if applicable."
                },
                "subnetMask": {
                    "type": ["string", "null"],
                    "description": "Subnet mask for the device, if applicable."
                },
                "gateway": {
                    "type": ["string", "null"],
                    "description": "Gateway address for the device, if applicable."
                },
                "dnsServers": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "List of DNS servers for the device."
                }
            }
        }
    }
}
